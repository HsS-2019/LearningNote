# 近期一些阅读的整理

#### 操作系统

1. 进程调度

   [进程、线程和协程的区别](https://blog.csdn.net/xiangxianghehe/article/details/80200522)

   [线程和进程的区别是什么？ - zhonyong的回答 - 知乎](https://www.zhihu.com/question/25532384/answer/81152571)

   线程为什么会出现资源竞争

2. 内存管理（虚存、块和页的概念）

3. [LRU](https://www.cnblogs.com/wyq178/p/9976815.html)，等常用算法（最近最久未使用算法，页面置换算法），SCAN（电梯算法）

   * LRU，最近最少用算法。元素加入链表前，判断链表元素是否已满，满则删除最后一个结点。然后查找链表中是否存在相同的元素，存在则把该元素删除，最后把新元素插入到链表的首部。
   * LFU，最近不经常使用算法。把数据加入到链表中，按频次排序。发生淘汰的时候，把频次低的淘汰掉。
   * 优化：用一个哈希表记录缓存，可以将插入，查找做到O（1）
   * [参考资料](https://www.jianshu.com/p/1f8e36285539)

#### 网络

1. OSI七层和TCP/IP四层

2. HTTPS的握手过程，HTTP和HTTPS的区别

   相比HTTP协议，HTTPS协议主要是多了SSL（记录协议，数据封装、压缩和加密）/TLS（握手协议，协商加密算法、身份认证、交换加密密钥）协议。

   HTTP和HTTPS的一些区别：

   * 证书

   * HTTP是超文本明文传输，HTTPS是ssl加密传输

   * 端口不一致

   * HTTP是无状态的，也是无连接的（借助于底层的TCP虚拟连接）

3. TCP的三次握手，四次挥手过程，TCP和UDP的区别

   三次握手交换序列号，四次挥手确保内容完整传输

   TCP协议的滑动窗口和拥塞控制保证可靠传输和流量控制

   TCP和UDP的一些区别

   * TCP面向连接，建立和释放连接都需要双方彼此通信
   * TCP和UDP都支持全双工服务，但TCP支持字节流传输，UDP支持报文传输
   * TCP可靠传输：校验和和确认机制检查数据安全，拥塞控制和重传功能
   * 相对的，UDP是一种无连接、不可靠、面向报文的传输层协议，对报文提供了可选的校验和保证数据正确性外，如果检测到收到的分组有差错就丢掉这个分组
   * UDP支持一对一、一对多和多对多的交互式通信（支持广播？），而TCP只支持一对一的单播

4. HTTP/1.x和HTTP/2（基于SPDY，多路复用、二进制分帧、首部压缩、server push）

   HTTP/2拥有和HTTP1相同的请求格式，但得到了很大的优化：多路复用，服务器Push

5. HTTP/3（基于UDP的QUIC，完美解决队头堵塞，0RTT建连——解决TCP+TLS建立连接的延时）做了哪些优化

   QUIC借助了UDP的优点，同时做了什么优化。QUIC在UDP基础上增加了一层保证数据的可靠传输。集成TLS，解决加密问题。多路复用，同一物理连接上可以有多个独立的逻辑数据流，避免队头阻塞。

   [参考资料](https://blog.csdn.net/howgod/article/details/102597450)

6. 网络层的路由选择和分组转发、IP协议解析（ARP地址解析协议）

7. 非对称加密算法：RSA、ECC和DH

   双方互相持有对方的公钥和自己的私钥。如何验证公钥和私钥的正确：CA。RSA原理：两个大素数作为私钥，而大素数的乘积作为公钥，因为大素数相乘是十分容易，而对乘积进行因式分解却很难。

   [参考资料](https://blog.csdn.net/u014294681/article/details/86705999)

ARC协议根据IP确定相邻目标主机的MAC地址，DNS根据域名解析出对应的IP地址

PS： 参考网络部分笔记，参考链接：

**补缺：iOS网络编程实践，多线程GCD，加密部分知识**

#### 算法

主要参考编程之美，剑指Offer，LeetCode。注：跳楼梯算法，[股票最大收益问题](https://segmentfault.com/a/1190000006672807)

##### 查找和排序

十种排序算法，静态查找和动态查找

##### 一些结构

###### 哈希表

###### 平衡二叉树

高度差小于等于1的二叉排序树。左子树结点总是小于当前节点，右子树节点总是大于等于当前结点。在插入和删除结点时，如果不符合平衡性要求，需要重新调整树。

###### 红黑树

1. 约束：平衡二叉树的一种变体，但高度差有可能大于1。

   结点为黑色或红色；根结点和叶子结点为黑色；红结点的两个子结点都是黑色的。

   所有叶子结点到根结点的路径不能存在连续的两个红色结点；从任一结点到每个叶子结点的所有路径都包含相同的黑色结点。

2. 这些约束决定了红黑树，从根结点到叶子结点的最长的可能路径不多于最短的可能路径的两倍长，因此这个树大致上是平衡的。这个在高度上的理论上限允许红黑树在最坏情况下都是高效的，因为这里的性能取决于查找的效率。
3. 插入和删除结点后，为了不违背红黑树的性质，我们需要对相关结点做一系列的调整。通过对树进行旋转，修改树中某些结点的颜色和指针结构，以达到插入和删除操作完成后仍保持红黑树特有性质的目的。
4. 插入结点时，首先根据一般二叉查找树的插入步骤插入，然后把插入结点着色为红色，判断是否需要调整，需要则对有关结点重着色并旋转。如果插入是黑色会破坏所有路径黑色数量一致的约束。
5. 删除结点和插入结点算法大体上一致。如果删除结点时红色，不需要做任何操作，红黑色属性未被破坏。
6. 插入和删除结点的时间复杂度都是O(log n)。应用：Linux系统中的部分任务调度和虚拟内存场景中，数据库的索引机制

###### 字典树

#### iOS

Swift和OC的语法，系统底层机制，对语言特性的探究（Property Wrapper）

1. [了解OC语法]()

   OC有哪些属性关键字：atomic，readwrite，assign，strong，copy

   在ARC下，基本数据类型默认的关键字是：atomic，readwrite，assign

   普通Objective-C对象默认关键字是：atomic，readwrite，strong

2. [了解Flutter的一些机制]()

3. [了解MVC和MVVM模式]()

4. [Swift的不安全性]()

##### # 对于Swift的了解

类型安全（编译器类型检查，类型推断，不支持隐式类型转换）的静态语言。

1. Swift和OC的区别和联系：[有侧重点地区分Swift和OC](http://www.cocoachina.com/cms/wap.php?action=article&id=26989)

##### 基础知识

* [响应链和传递链](https://gsl201600.github.io/2019/12/25/iOS%E4%B8%AD%E4%BA%8B%E4%BB%B6%E7%9A%84%E5%93%8D%E5%BA%94%E9%93%BE%E5%92%8C%E4%BC%A0%E9%80%92%E9%93%BE/)

  事件传递过程中，通过调用UIView的hitTest检测是否在子view上，在hitTest方法中首先调用pointInside判断触摸点point是否在当前UIView上，在则遍历它的子视图来查找最终响应的子视图。

  事件响应过程中，如果View的控制器存在，传递给控制器处理，否则传递给它的父视图，一直传递上去，如果UIApplication也不能处理该事件，则将该事件丢弃。

* App内通信方式：Delegate、Notification和KVO

* GCD的使用

* MVC和MVVM模式

* [第三方库的使用]()

##### 底层探索

1. [中文版Apple官方Swift教程](https://swiftgg.gitbook.io/swift/)

2. [Property Wrapper的使用]()

3. [Swift值类型、引用类型 & 堆、栈](https://blog.csdn.net/yarn_/article/details/75314524)

4. [Swift底层探秘——从Iterator到Collection]()

5. [Swift的静态派发和动态派发机制](https://juejin.im/post/6844904120810209294)

6. [runloop和Timer的了解]()

   [了解runloop](https://gsl201600.github.io/2020/01/17/iOSRunLoop/)：线程和runloop是一一对应的，runloop在第一次获取时创建，在线程结束时被销毁。手动创建的线程默认没有开启runloop，对于子线程而言，runloop是懒加载的，在我们使用的时候才创建，子线程使用timer需要注意子线程的runloop是否已经创建。对于主线程来说，runloop在程序一启动就默认创建好了。

   runloop在每个事件循环结束后会去自动释放池将所有自动释放对象的引用计数减一。

   Timer：在子线程使用Timer时，一定要先确保子线程开启了runloop（且runloop中的mode添加了item维持runloop的事件循环），否则timer的回调不会执行。

7. 

##### 编译原理

1. [怎么写一个解释器](http://www.yinwang.org/blog-cn/2012/08/01/interpreter) 

   解释器和编译器的区别

##### # 内存机制

iOS的引用计数机制，引用循环的分析和解决（内存泄漏）。引用计数的底层实现机制（Side Table等）

1. [引用计数原理解析]()
2. [Swift进阶之内存模型和方法调度](https://blog.csdn.net/hello_hwc/article/details/53147910)
3. [深入理解Swift派发机制](https://kemchenj.github.io/2016-12-25-1/)
4. [iOS引用计数管理之揭秘计数存储](https://www.jianshu.com/p/17817e6efaf5)，[苹果iOS系统源码思考](https://juejin.im/post/6844903639094394893)

#### 项目

在项目里主要做了什么

1. 完成文件保存和同步模块，支持离线模式下对文件操作，实现缓存管理避免文件丢失

   * 文件保存流程

     直接覆盖原文件——新的文档生成成功才删除原文件——保存后原文件缓存到cache中

     保存的判断，判断是否进行保存的条件设定

   * 文件同步流程

     手动保存同步时直接比对，处理冲突（冲突不应直接覆盖本地），返回云文件后刷新同步，应用相同规则，并做好

   * 缓存管理和清除（避免文件丢失的方法）

     管理本地文件/文件夹的状态，tag信息，缓存最近浏览记录

2. 实现会员管理模块，包括游客模式和离线下的会员状态管理
   * 离线下会员支持：编写了统一的会员管理模块，切换后台/登录/打开软件/保存/定时刷新用户的会员信息，判断时直接调用统一的判断接口
   * 游客模式的实现：实现用户游客态的管理，游客不使用云，会员功能提示购买会员，游客会员隐式绑定appid，登录后检测游客会员绑定

3. 实现异常收集和分析，包括友盟、Bugly的集成和自定义异常收集

   * 异常收集的原理

     拦截Unix信号和Mach异常并进行处理，可以参考淘宝技术之前分享的一篇崩溃捕获的文章，[Crash分析攻略](https://mp.weixin.qq.com/s/hVj-j61Br3dox37SN79fDQ)

   * 怎么分析一个异常，通过什么方法定位/修改

   * 为了避免异常的发生应该做点什么

   * 自定义异常的用途和收集的内容

   * 成果：最终把崩溃率降到了0.0x%

4. 实现iOS端的适配，包 括不同机型适配，iPad键盘和界面适配，iOS13和iOS14适配解决（深色模式、AppleID登录、相册API的适配，编辑界面自定义主题颜色）
   * 适配遇到的一些特殊问题的处理：
   * 深色模式的适配和自定义颜色的方案比较
   * 相册API的适配和封装

5. 内存泄漏解决和内存占用优化

   * 编辑页强引用导致的内存泄漏，View层次的循环引用和迁移的核心库中存在的循环引用

     分析并处理了闭包中和view层面的循环强引用，部分内核库也修改了引用方式

   * 内存占用，绘制的区域尺寸过大

     缓存机制，切分绘制的块大小，按比例绘制导图，图片压缩，懒加载（懒加载的缺点）

   * tableview简单优化

     预加载，加载直接读取本地图片，优化图片大小。

6. 极难挑战的点

7. 对竞品的了解和分析

一些编程实践：

1. [一段代码的重构实践记录](https://juejin.im/post/5e01cb76f265da339260c753)
2. [Swift复杂视图多事件回调处理方案思考](https://www.jianshu.com/p/204e2d00c202)
3. [基于CoreText的排版实践](https://blog.devtang.com/2015/06/26/using-coretext-1/)

#### 自我学习和规划

最近我在写些什么，主要是个人学习笔记，在微信公众号、个人博客和Github发布。

未来个人规划：开一个项目，用上自己学习到的一些东西和实践一些想法

有看到哪些比较好的书：王巍的《Swift Tips》，《Adcance Swift》和戴铭的《iOS编程-理顺核心知识点》

知识的获取途径：技术社区或组织：老司机技术周报、SwiftGG、知识小集，掘金、微信公众号和小专栏等，一些个人博客，包括国外的博主。主要关注方面：iOS底层解析、编程实践，技术的更新（如Swift的新特性），另外，paul的课程还是停留在三分之二的进度，一直没看完…。

